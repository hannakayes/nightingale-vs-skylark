<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nachtigall, ick hör dir trapsen</title>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <div id="startScreen" class="screen">
        <h1 class="game-title">Nachtigall, 
            <br>ick hör dir
            <br>trapsen.</h1>
        <div class="title-image-container">
            <img src="images/title-image.png" alt="Start Image" class="title-image">
        </div>
        <div class="intro-instructions">
            <p class="intro-text">“It was the nightingale, and not the lark” is what Shakespeare wrote in the 16th century – in literature, nightingale and skylark have been contestants for the most beautiful song since humans started writing about them. High time they settle their battle once and for all. Make them sing loud and clear – but beware of noisy objects flying by!</p>
            <div class="instructions">
                <ul>
                    <li>↑ Arrow up – Make the lark jump</li>
                    <li>← Arrow left – Make the lark move left</li>
                    <li>→ Arrow right – Make the lark move right</li>
                    <li>↓ Arrow down – Move down again</li>
                </ul>
            </div>
        </div>
        <button id="startButton" class="start-button">START</button>
    </div>
    <div id="gameScreen" class="screen">
        <h1 class="game-title">Nachtigall,<br>ick hör dir<br>trapsen.</h1>
        <div id="gameArea">
            <img src="images/skylark_standing.png" alt="Skylark" id="skylark">
        </div>
        <div id="nightingaleContainer">
            <img src="images/nightingale.png" alt="Nightingale" id="nightingale">
        </div>
        <div id="gameStats">
            <p>Lives left: <span id="singingPoints">3</span></p>
            <p>Level: <span id="level">1</span></p>
            <p>Flying skills: <span id="flyingSkills">0</span></p>
        </div>
    </div>
    <div id="endScreen" class="screen">
        <h1 class="game-title">Nachtigall,<br>ick hör dir<br>trapsen.</h1>
        <div id="endMessage"></div>
        <div id="finalStats"></div>
        <button id="restartButton" class="restart-button">RESTART</button>
    </div>

    <script src="js/player.js"></script>
    <script src="js/obstacle.js"></script>
    <script src="js/game.js"></script>
    <script src="js/script.js"></script>

    <script>
        // Inline script to ensure IDs are accessible by game.js
        document.addEventListener('DOMContentLoaded', function() {
            // Confirm IDs used in game.js are available
            const singingPoints = document.getElementById('singingPoints'); // For lives remaining
            const level = document.getElementById('level'); // For current level
            const flyingSkills = document.getElementById('flyingSkills'); // For flying skills
            const endMessageElement = document.getElementById('endMessage'); // For displaying end message
            const finalStatsElement = document.getElementById('finalStats'); // For displaying final stats

            // Update endGame function in game.js to show appropriate message and stats
            function endGame() {
                showScreen('endScreen');

                // Determine end message based on gameStats.level
                if (gameStats.level < 3) {
                    endMessageElement.textContent = "City life is tough. Better luck next time!";
                } else if (gameStats.level < 6) {
                    endMessageElement.textContent = "You're definitely an urban lark but nightingale wins!";
                } else if (gameStats.level < 10) {
                    endMessageElement.textContent = "You use your voice well, little lark!";
                } else if (gameStats.level === 10) {
                    endMessageElement.textContent = "You mastered all city noises – nightingale has nothing on you!";
                }

                // Display final stats
                finalStatsElement.innerHTML = `
                
                    <p>Lives remaining: ${gameStats.lives}</p>
                    <p>Level reached: ${gameStats.level}</p>
                    <p>Flying skills: ${gameStats.flyingSkills}</p>
                `;
            }

            // Ensure restartButton is correctly referenced
            const restartButton = document.getElementById('restartButton');
            restartButton.addEventListener('click', restartGame);
        });
    </script>
</body>
</html>
